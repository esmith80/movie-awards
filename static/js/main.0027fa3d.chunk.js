(this["webpackJsonpmovie-awards"]=this["webpackJsonpmovie-awards"]||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(19),s=n.n(o),i=(n(26),n(6)),l=n.n(i),u=n(8),h=n(4),d=n(20),m=n(3),j=(n(28),function(e){var t=e.id,n=e.nominate,c=e.nominee,r=e.maxNomsReached,o=e.poster,s=e.title,i=e.year;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:i}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(){n(s,i,t,o)},disabled:c||r,children:c?"\ud83c\udfc6":"Nominate"})})]})})});var b=function(e){var t,n=e.nominate,r=e.movies,o=e.maxNomsReached,s=e.lastSearchTerm,i=e.getMovies,l=e.handlePageChange,u=e.searchPage,h=!1,d=0;function m(){h=!0,t&&clearInterval(t),t=setInterval((function(){if(h){h=!1;var e=document.getElementById("root").scrollHeight-window.innerHeight-window.scrollY;d=e,e<10&&e<=d&&(i(s+"*",u+1),l(u+1))}}),250)}Object(c.useEffect)((function(){return window.addEventListener("scroll",m),function(){window.removeEventListener("scroll",m),clearInterval(t)}}));for(var b=[],f=0;f<r.length;f++)r[f]&&b.push(Object(a.jsx)(j,{id:r[f].imdbID,title:r[f].Title,year:r[f].Year,poster:r[f].Poster,nominate:n,nominee:r[f].nominee,maxNomsReached:o},f));return console.log("SEARCH LIST RENDER"),Object(a.jsx)("div",{className:"search-container",children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:b})})})},f=function(e){var t=e.poster,n=e.remove,c=e.imdbID,r=e.title;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"nom-item",children:[Object(a.jsx)("img",{className:"poster",src:t.includes("jpg")?t:"https://www.kirkstall.com/wp-content/uploads/2020/04/image-not-available-png-8.png",alt:r}),Object(a.jsx)("button",{className:"nom-button",onClick:function(){n(c)},children:"Remove"})]})})};var v=function(e){for(var t=e.remove,n=e.nominees,c=[],r=0;r<n.length;r++)c.push(Object(a.jsx)(f,{imdbID:n[r].imdbID,title:n[r].Title,year:n[r].Year,poster:n[r].Poster,remove:t},r));return Object(a.jsx)("div",{className:"nom-container",children:c})},g=n(10),O=n.n(g),p=function(e){var t=e.title,n=e.setSearchText,c=e.getMovies,r=(e.searchText,e.setShowTypeAhead);return Object(a.jsx)("div",{className:"searchbar-result-item",onClick:function(){t.startsWith("no results for ")||n(t),c(t,1),r(!1)},children:t})},x=function(e,t){var n,a=e,c=Object(h.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value,o=new RegExp("".concat(r),"g");a=a.replace(o,"")}}catch(s){c.e(s)}finally{c.f()}return a=function(e){return e.replace(/ {2,}/g," ")}(a)};var y=function(e){var t=e.searchText,n=e.setSearchText,r=e.setShowTypeAhead,o=e.getMovies,s=e.setInTypeAhead,i=Object(c.useState)([]),d=Object(m.a)(i,2),j=d[0],b=d[1];function f(){return(f=Object(u.a)(l.a.mark((function e(n){var a,c,r,o,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(n,["&","-"]),console.log("call API - searchText: ",t),e.next=4,O.a.get("https://www.omdbapi.com/?s=".concat(n,"*&type=movie&page=1&apikey=bbde90f3"));case 4:if(a=e.sent,c=a.data.Search){r=[],o=Object(h.a)(c);try{for(o.s();!(s=o.n()).done;)i=s.value,r.push(i.Title)}catch(l){o.e(l)}finally{o.f()}b(r)}else b(['no results for "'.concat(t,'"')]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v,g=!1;Object(c.useEffect)((function(){var e;return e=t,g=!0,v&&clearTimeout(v),v=setTimeout((function(){g&&(g=!1,function(e){f.apply(this,arguments)}(e))}),200),function(){clearTimeout(v)}}),[t,v]);var y=j.map((function(e,c){return Object(a.jsx)(p,{title:e,setSearchText:n,setInTypeAhead:s,setShowTypeAhead:r,getMovies:o,searchText:t},c)}));return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"searchbar-results",onMouseEnter:function(){console.log("onMouseEnter"),s(!0)},onMouseLeave:function(){console.log("onMouseLeave"),s(!1)},children:y})})},S=function(e){var t=e.getMovies,n=Object(c.useState)(""),r=Object(m.a)(n,2),o=r[0],s=r[1],i=Object(c.useState)(!1),l=Object(m.a)(i,2),u=l[0],h=l[1],d=Object(c.useState)(!1),j=Object(m.a)(d,2),b=j[0],f=j[1];return Object(a.jsxs)("div",{className:"searchbar",children:[Object(a.jsxs)("div",{className:"input-search-results-container",onBlur:function(){console.log("inTypeAhead is: ",b),b||h(!1),console.log("onBlur fired")},onFocus:function(){h(!0),console.log("onFocus fired")},children:[Object(a.jsx)("input",{placeholder:"Search for a movie to nominate...",id:"search-text",type:"search",name:"search-text",value:o,onKeyUp:function(e){"Enter"===e.key&&o.trim().length&&t(o+"*",1)},onChange:function(){s(document.getElementById("search-text").value)}}),o.trim().length>2&&u?Object(a.jsx)(y,{setSearchText:s,searchText:o.trim(),setShowTypeAhead:h,getMovies:t,setInTypeAhead:f}):null]}),Object(a.jsx)("button",{onClick:function(){o.trim().length&&t(o.trim()+"*",1)},children:"Search"})]})},w=function(){return Object(a.jsx)("div",{className:"banner",children:Object(a.jsx)("h4",{children:"You have selected the maximum of 5 nominees. If you would like to change your nominations, use the 'Remove' button."})})},T=n(10);var N=function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t),r=localStorage[n];n.match(/tt\d{7}/g)&&(r=JSON.parse(r),e.push(r))}var o=Object(c.useState)({}),s=Object(m.a)(o,2),i=s[0],j=s[1],f=Object(c.useState)(!1),g=Object(m.a)(f,2),O=g[0],p=g[1],y=Object(c.useState)(""),N=Object(m.a)(y,2),I=N[0],k=N[1],E=Object(c.useState)(e.length?e:[]),M=Object(m.a)(E,2),A=M[0],P=M[1],D=Object(c.useState)(1),R=Object(m.a)(D,2),C=R[0],F=R[1];function L(e,t){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function e(t,n){var a,c,r,o,s,u,d,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x(t,["&","-"]),1===n&&F(1),e.prev=2,e.next=5,T.get("https://www.omdbapi.com/?s=".concat(t,"&type=movie&page=").concat(n,"&apikey=bbde90f3"));case 5:a=e.sent,c=a.data.Search,r=Object(h.a)(c);try{for(r.s();!(o=r.n()).done;)if(s=o.value){s.nominee=!1,u=Object(h.a)(A);try{for(u.s();!(d=u.n()).done;)m=d.value,s.imdbID===m.imdbID&&(s.nominee=!0)}catch(l){u.e(l)}finally{u.f()}}}catch(l){r.e(l)}finally{r.f()}k(t.replace("*","").trim()),1===n||(c=i.concat(c)),j(c),p(!c.length),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}return console.log("APP RENDER"),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("h1",{children:"Movie Awards"}),Object(a.jsx)(S,{getMovies:L,setMovies:j,searchPage:C,setSearchPage:F}),5===A.length?Object(a.jsx)(w,{}):null]}),A.length?Object(a.jsx)(v,{className:"nom-container",remove:function(e){for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);if(localStorage[n].includes(e)){localStorage.removeItem(n);break}}var a,c=[],r=Object(h.a)(A);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.imdbID!==e&&c.push(o)}}catch(d){r.e(d)}finally{r.f()}if(i.length){var s,l=Object(h.a)(i);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(u.imdbID===e){u.nominee=!1;break}}}catch(d){l.e(d)}finally{l.f()}}P(c)},nominees:A}):Object(a.jsx)("div",{className:"nom-container"}),i.length?Object(a.jsx)(b,{className:"search-container",nominate:function(e,t,n,a){var c={Title:e,Year:t,imdbID:n,Poster:a};P([].concat(Object(d.a)(A),[c])),localStorage.setItem(n,JSON.stringify(c));var r,o=Object(h.a)(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.imdbID===n){s.nominee=!0;break}}}catch(l){o.e(l)}finally{o.f()}},movies:i,maxNomsReached:5===A.length,lastSearchTerm:I,getMovies:L,handlePageChange:function(e){F(e)},searchPage:C}):O?Object(a.jsxs)("div",{className:"search-container",children:["Sorry, we could not find '",I,"'"]}):Object(a.jsx)("div",{className:"search-container"})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),I()}},[[47,1,2]]]);
//# sourceMappingURL=main.0027fa3d.chunk.js.map